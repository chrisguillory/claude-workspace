<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test: ARIA Live Regions</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }

    h1 {
      color: #1a1a1a;
      border-bottom: 3px solid #e91e63;
      padding-bottom: 10px;
    }

    .intro {
      background: #fce4ec;
      padding: 15px;
      border-left: 4px solid #e91e63;
      margin: 20px 0;
    }

    .test-case {
      background: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      margin: 20px 0;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .test-case h2 {
      color: #333;
      font-size: 18px;
      margin-top: 0;
    }

    .expected {
      background: #e8f5e9;
      border-left: 4px solid #4caf50;
      padding: 12px;
      margin: 15px 0;
      font-family: 'Courier New', monospace;
      font-size: 13px;
    }

    .demo {
      background: #fafafa;
      border: 1px dashed #ccc;
      padding: 15px;
      margin: 15px 0;
      border-radius: 4px;
    }

    .live-region {
      padding: 15px;
      border-radius: 4px;
      margin: 10px 0;
    }

    .alert-box {
      background: #ffebee;
      border: 2px solid #f44336;
      color: #c62828;
    }

    .status-box {
      background: #e3f2fd;
      border: 2px solid #2196f3;
      color: #1565c0;
    }

    .log-box {
      background: #f5f5f5;
      border: 1px solid #9e9e9e;
      font-family: monospace;
      max-height: 150px;
      overflow-y: auto;
    }

    .timer-box {
      background: #fff8e1;
      border: 2px solid #ffc107;
      color: #f57f17;
      font-size: 24px;
      text-align: center;
    }

    .marquee-box {
      background: #e8f5e9;
      border: 2px solid #4caf50;
      overflow: hidden;
    }

    .chat-message {
      padding: 8px;
      margin: 5px 0;
      border-radius: 4px;
    }

    .chat-incoming {
      background: #e3f2fd;
      margin-right: 20%;
    }

    .chat-outgoing {
      background: #c8e6c9;
      margin-left: 20%;
      text-align: right;
    }
  </style>
</head>
<body>

<!--
================================================================================
TEST FILE METADATA
================================================================================
FILE: live-regions.html
PURPOSE: Test ARIA live region extraction for get_aria_snapshot
VALIDATES: aria-live, aria-atomic, aria-relevant, aria-busy, and live region roles

EXPECTED BEHAVIOR:
- Live region attributes should be captured in snapshot
- Implicit live region roles (alert, status, log, etc.) should be identified
- aria-atomic and aria-relevant should be tracked

UPDATED: 2025-12-23
================================================================================
-->

  <h1>ARIA Live Regions Tests</h1>

  <div class="intro">
    <p><strong>Purpose:</strong> Validate that ARIA live regions are correctly identified by get_aria_snapshot.</p>
    <p><strong>Key attributes:</strong> aria-live, aria-atomic, aria-relevant, aria-busy</p>
    <p><strong>Key roles:</strong> alert, status, log, marquee, timer</p>
    <p><strong>These tests validate future enhancements</strong> - current implementation may not pass all tests.</p>
  </div>

  <!-- ===================================================================== -->
  <!-- TEST 1: aria-live="polite"                                            -->
  <!-- ===================================================================== -->

  <section id="test-1" class="test-case">
    <h2>Test 1: aria-live="polite" (Non-interruptive)</h2>

    <div class="expected">
      Live Regions Test 1 passed: Should show live="polite" attribute
    </div>

    <div class="demo">
      <div class="live-region status-box"
           aria-live="polite"
           aria-label="Status updates">
        Live Regions Test 1a passed: This region announces changes politely.
      </div>

      <div class="live-region status-box"
           aria-live="polite"
           aria-atomic="true">
        Live Regions Test 1b passed: Polite with atomic (announces entire region).
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 2: aria-live="assertive"                                         -->
  <!-- ===================================================================== -->

  <section id="test-2" class="test-case">
    <h2>Test 2: aria-live="assertive" (Interruptive)</h2>

    <div class="expected">
      Live Regions Test 2 passed: Should show live="assertive" attribute
    </div>

    <div class="demo">
      <div class="live-region alert-box"
           aria-live="assertive"
           aria-label="Critical alerts">
        Live Regions Test 2a passed: This region announces changes immediately.
      </div>

      <div class="live-region alert-box"
           aria-live="assertive"
           aria-atomic="false">
        Live Regions Test 2b passed: Assertive with atomic=false (only changed content).
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 3: aria-live="off"                                               -->
  <!-- ===================================================================== -->

  <section id="test-3" class="test-case">
    <h2>Test 3: aria-live="off" (Disabled)</h2>

    <div class="expected">
      Live Regions Test 3 passed: Should show live="off" (updates not announced)
    </div>

    <div class="demo">
      <div class="live-region"
           aria-live="off"
           style="background: #f5f5f5; border: 1px solid #ccc;">
        Live Regions Test 3a passed: Changes here are NOT announced.
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 4: role="alert" (Implicit assertive)                             -->
  <!-- ===================================================================== -->

  <section id="test-4" class="test-case">
    <h2>Test 4: role="alert" (Implicit Assertive Live)</h2>

    <div class="expected">
      Live Regions Test 4 passed: Alert role implies aria-live="assertive" and aria-atomic="true"
    </div>

    <div class="demo">
      <div class="live-region alert-box" role="alert">
        Live Regions Test 4a passed: Error! Something went wrong.
      </div>

      <div class="live-region alert-box" role="alert" aria-live="polite">
        Live Regions Test 4b passed: Alert with explicit polite override.
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 5: role="status" (Implicit polite)                               -->
  <!-- ===================================================================== -->

  <section id="test-5" class="test-case">
    <h2>Test 5: role="status" (Implicit Polite Live)</h2>

    <div class="expected">
      Live Regions Test 5 passed: Status role implies aria-live="polite" and aria-atomic="true"
    </div>

    <div class="demo">
      <div class="live-region status-box" role="status">
        Live Regions Test 5a passed: 42 items in your cart.
      </div>

      <output class="live-region status-box">
        Live Regions Test 5b passed: Native output element (implicit status).
      </output>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 6: role="log" (Scrolling content)                                -->
  <!-- ===================================================================== -->

  <section id="test-6" class="test-case">
    <h2>Test 6: role="log" (Sequential Updates)</h2>

    <div class="expected">
      Live Regions Test 6 passed: Log role implies aria-live="polite" and new entries announced
    </div>

    <div class="demo">
      <div class="live-region log-box" role="log" aria-label="Activity log">
        <p>Live Regions Test 6a passed: [10:00] User logged in</p>
        <p>Live Regions Test 6b passed: [10:05] Document opened</p>
        <p>Live Regions Test 6c passed: [10:10] Changes saved</p>
        <p>[10:15] Session active</p>
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 7: role="marquee" (Non-essential updates)                        -->
  <!-- ===================================================================== -->

  <section id="test-7" class="test-case">
    <h2>Test 7: role="marquee" (Non-essential Scrolling)</h2>

    <div class="expected">
      Live Regions Test 7 passed: Marquee role implies aria-live="off" by default
    </div>

    <div class="demo">
      <div class="live-region marquee-box" role="marquee" aria-label="News ticker">
        Live Regions Test 7a passed: Breaking news: Important announcement...
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 8: role="timer" (Time-based updates)                             -->
  <!-- ===================================================================== -->

  <section id="test-8" class="test-case">
    <h2>Test 8: role="timer" (Countdown/Clock)</h2>

    <div class="expected">
      Live Regions Test 8 passed: Timer role implies aria-live="off" (too frequent)
    </div>

    <div class="demo">
      <div class="live-region timer-box" role="timer" aria-label="Countdown timer">
        Live Regions Test 8a passed: 05:00
      </div>

      <div class="live-region timer-box" role="timer" aria-live="polite" aria-label="Periodic announcements">
        Live Regions Test 8b passed: Timer with polite override
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 9: aria-atomic                                                   -->
  <!-- ===================================================================== -->

  <section id="test-9" class="test-case">
    <h2>Test 9: aria-atomic (Announce Entire Region)</h2>

    <div class="expected">
      Live Regions Test 9 passed: atomic=true/false controls what's announced
    </div>

    <div class="demo">
      <div class="live-region status-box"
           aria-live="polite"
           aria-atomic="true">
        <span>Price: </span>
        <span>Live Regions Test 9a passed: $99.99</span>
        <span> (atomic=true: announces all)</span>
      </div>

      <div class="live-region status-box"
           aria-live="polite"
           aria-atomic="false">
        <span>Count: </span>
        <span>Live Regions Test 9b passed: 5</span>
        <span> (atomic=false: only changed part)</span>
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 10: aria-relevant                                                -->
  <!-- ===================================================================== -->

  <section id="test-10" class="test-case">
    <h2>Test 10: aria-relevant (What Changes to Announce)</h2>

    <div class="expected">
      Live Regions Test 10 passed: relevant values: additions, removals, text, all
    </div>

    <div class="demo">
      <div class="live-region status-box"
           aria-live="polite"
           aria-relevant="additions">
        Live Regions Test 10a passed: Only new content announced (additions).
      </div>

      <div class="live-region status-box"
           aria-live="polite"
           aria-relevant="removals">
        Live Regions Test 10b passed: Only removed content announced.
      </div>

      <div class="live-region status-box"
           aria-live="polite"
           aria-relevant="text">
        Live Regions Test 10c passed: Only text changes announced.
      </div>

      <div class="live-region status-box"
           aria-live="polite"
           aria-relevant="all">
        Live Regions Test 10d passed: All changes announced.
      </div>

      <div class="live-region status-box"
           aria-live="polite"
           aria-relevant="additions removals">
        Live Regions Test 10e passed: Multiple values (additions and removals).
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 11: aria-busy with live regions                                  -->
  <!-- ===================================================================== -->

  <section id="test-11" class="test-case">
    <h2>Test 11: aria-busy (Suppress Announcements)</h2>

    <div class="expected">
      Live Regions Test 11 passed: busy=true suppresses announcements until complete
    </div>

    <div class="demo">
      <div class="live-region status-box"
           aria-live="polite"
           aria-busy="true">
        Live Regions Test 11a passed: Loading... (busy=true, changes NOT announced yet)
      </div>

      <div class="live-region status-box"
           aria-live="polite"
           aria-busy="false">
        Live Regions Test 11b passed: Ready! (busy=false, changes announced normally)
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 12: Chat/Feed Pattern                                            -->
  <!-- ===================================================================== -->

  <section id="test-12" class="test-case">
    <h2>Test 12: Chat/Feed Pattern (Multiple Live Regions)</h2>

    <div class="expected">
      Live Regions Test 12 passed: Complex chat interface with live updates
    </div>

    <div class="demo">
      <div role="log"
           aria-live="polite"
           aria-label="Live Regions Test 12a passed: Chat messages"
           style="border: 1px solid #ccc; padding: 10px; max-height: 200px; overflow-y: auto;">
        <div class="chat-message chat-incoming">
          <strong>Alice:</strong> Live Regions Test 12b passed: Hello!
        </div>
        <div class="chat-message chat-outgoing">
          <strong>You:</strong> Hi there!
        </div>
        <div class="chat-message chat-incoming">
          <strong>Alice:</strong> How are you?
        </div>
      </div>

      <div role="status" aria-live="polite" style="margin-top: 10px; color: #666;">
        Live Regions Test 12c passed: Alice is typing...
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 13: Nested Live Regions                                          -->
  <!-- ===================================================================== -->

  <section id="test-13" class="test-case">
    <h2>Test 13: Nested Live Regions</h2>

    <div class="expected">
      Live Regions Test 13 passed: Nested regions should be handled correctly
    </div>

    <div class="demo">
      <div aria-live="polite" aria-label="Outer region" class="live-region status-box">
        Live Regions Test 13a passed: Outer live region (polite)
        <div aria-live="assertive" class="live-region alert-box" style="margin: 10px 0;">
          Live Regions Test 13b passed: Nested assertive region
        </div>
        <p>Live Regions Test 13c passed: More outer content</p>
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 14: Alertdialog                                                  -->
  <!-- ===================================================================== -->

  <section id="test-14" class="test-case">
    <h2>Test 14: role="alertdialog" (Modal Alert)</h2>

    <div class="expected">
      Live Regions Test 14 passed: Alertdialog is a live region variant requiring user action
    </div>

    <div class="demo">
      <div role="alertdialog"
           aria-modal="true"
           aria-labelledby="alertdialog-title"
           aria-describedby="alertdialog-desc"
           class="live-region alert-box">
        <h3 id="alertdialog-title">Live Regions Test 14a passed: Confirm Delete</h3>
        <p id="alertdialog-desc">Live Regions Test 14b passed: Are you sure you want to delete this item?</p>
        <button>Delete</button>
        <button>Cancel</button>
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- VALIDATION SECTION                                                    -->
  <!-- ===================================================================== -->

  <footer style="margin-top: 40px; padding: 20px; background: #f0f0f0; border-radius: 8px;">
    <h2>Validation Checklist</h2>

    <h3 style="color: #2e7d32;">Live region attributes to capture:</h3>
    <table style="width: 100%; border-collapse: collapse;">
      <tr style="background: #e0e0e0;">
        <th style="padding: 8px; text-align: left;">Attribute/Role</th>
        <th style="padding: 8px; text-align: left;">Values</th>
        <th style="padding: 8px; text-align: left;">Implicit Behavior</th>
      </tr>
      <tr>
        <td style="padding: 8px;">aria-live</td>
        <td style="padding: 8px;">polite, assertive, off</td>
        <td style="padding: 8px;">Explicit live region</td>
      </tr>
      <tr style="background: #f5f5f5;">
        <td style="padding: 8px;">aria-atomic</td>
        <td style="padding: 8px;">true, false</td>
        <td style="padding: 8px;">Announce whole region vs changed parts</td>
      </tr>
      <tr>
        <td style="padding: 8px;">aria-relevant</td>
        <td style="padding: 8px;">additions, removals, text, all</td>
        <td style="padding: 8px;">What types of changes to announce</td>
      </tr>
      <tr style="background: #f5f5f5;">
        <td style="padding: 8px;">aria-busy</td>
        <td style="padding: 8px;">true, false</td>
        <td style="padding: 8px;">Suppress until complete</td>
      </tr>
      <tr>
        <td style="padding: 8px;">role="alert"</td>
        <td style="padding: 8px;">-</td>
        <td style="padding: 8px;">Implicit assertive + atomic</td>
      </tr>
      <tr style="background: #f5f5f5;">
        <td style="padding: 8px;">role="status"</td>
        <td style="padding: 8px;">-</td>
        <td style="padding: 8px;">Implicit polite + atomic</td>
      </tr>
      <tr>
        <td style="padding: 8px;">role="log"</td>
        <td style="padding: 8px;">-</td>
        <td style="padding: 8px;">Implicit polite, sequential</td>
      </tr>
      <tr style="background: #f5f5f5;">
        <td style="padding: 8px;">role="marquee"</td>
        <td style="padding: 8px;">-</td>
        <td style="padding: 8px;">Implicit off (non-essential)</td>
      </tr>
      <tr>
        <td style="padding: 8px;">role="timer"</td>
        <td style="padding: 8px;">-</td>
        <td style="padding: 8px;">Implicit off (too frequent)</td>
      </tr>
      <tr style="background: #f5f5f5;">
        <td style="padding: 8px;">role="alertdialog"</td>
        <td style="padding: 8px;">-</td>
        <td style="padding: 8px;">Alert + dialog (requires action)</td>
      </tr>
    </table>

    <p><strong>Success Criteria:</strong> All "Live Regions Test N" markers present with correct live region attributes.</p>
  </footer>

</body>
</html>
