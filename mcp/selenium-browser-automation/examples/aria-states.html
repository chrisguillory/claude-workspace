<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test: ARIA States & Properties</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }

    h1 {
      color: #1a1a1a;
      border-bottom: 3px solid #9c27b0;
      padding-bottom: 10px;
    }

    .intro {
      background: #f3e5f5;
      padding: 15px;
      border-left: 4px solid #9c27b0;
      margin: 20px 0;
    }

    .test-case {
      background: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      margin: 20px 0;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .test-case h2 {
      color: #333;
      font-size: 18px;
      margin-top: 0;
    }

    .expected {
      background: #e8f5e9;
      border-left: 4px solid #4caf50;
      padding: 12px;
      margin: 15px 0;
      font-family: 'Courier New', monospace;
      font-size: 13px;
    }

    .demo {
      background: #fafafa;
      border: 1px dashed #ccc;
      padding: 15px;
      margin: 15px 0;
      border-radius: 4px;
    }

    button {
      padding: 8px 16px;
      margin: 5px;
      cursor: pointer;
    }

    .accordion-header {
      background: #e3f2fd;
      padding: 10px 15px;
      border: 1px solid #90caf9;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .accordion-content {
      padding: 15px;
      border: 1px solid #90caf9;
      border-top: none;
    }

    .accordion-content[hidden] {
      display: none;
    }

    .tab-list {
      display: flex;
      border-bottom: 2px solid #ddd;
    }

    .tab {
      padding: 10px 20px;
      border: none;
      background: #f5f5f5;
      cursor: pointer;
    }

    .tab[aria-selected="true"] {
      background: white;
      border-bottom: 2px solid #2196f3;
      margin-bottom: -2px;
    }

    .toggle-btn {
      padding: 10px 20px;
      border: 2px solid #666;
      background: white;
    }

    .toggle-btn[aria-pressed="true"] {
      background: #4caf50;
      color: white;
      border-color: #4caf50;
    }

    .required-field::after {
      content: " *";
      color: red;
    }

    .invalid-input {
      border: 2px solid #f44336;
    }

    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid #ccc;
      border-top-color: #2196f3;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-overlay[hidden] {
      display: none;
    }

    .modal-dialog {
      background: white;
      padding: 20px;
      border-radius: 8px;
      max-width: 400px;
    }
  </style>
</head>
<body>

<!--
================================================================================
TEST FILE METADATA
================================================================================
FILE: aria-states.html
PURPOSE: Test ARIA state and property extraction for get_aria_snapshot
VALIDATES: expanded, selected, pressed, haspopup, required, invalid, modal, busy

EXPECTED BEHAVIOR:
- ARIA states should appear in snapshot output
- Native HTML equivalents should map to ARIA states
- State values (true/false/mixed) should be captured

UPDATED: 2025-12-23
================================================================================
-->

  <h1>ARIA States & Properties Tests</h1>

  <div class="intro">
    <p><strong>Purpose:</strong> Validate that ARIA states and properties are correctly extracted by get_aria_snapshot.</p>
    <p><strong>These tests validate future enhancements</strong> - current implementation may not pass all tests.</p>
  </div>

  <!-- ===================================================================== -->
  <!-- TEST 1: aria-expanded (Accordion)                                     -->
  <!-- ===================================================================== -->

  <section id="test-1" class="test-case">
    <h2>Test 1: aria-expanded (Accordion Pattern)</h2>

    <div class="expected">
      ARIA States Test 1 passed: Should show "expanded=true" for open section, "expanded=false" for closed
    </div>

    <div class="demo">
      <div class="accordion-header"
           role="button"
           aria-expanded="true"
           aria-controls="panel1"
           id="accordion1">
        ARIA States Test 1a passed: Expanded accordion header
        <span aria-hidden="true">▼</span>
      </div>
      <div class="accordion-content" id="panel1" role="region" aria-labelledby="accordion1">
        This content is visible because aria-expanded is true.
      </div>

      <div class="accordion-header"
           role="button"
           aria-expanded="false"
           aria-controls="panel2"
           id="accordion2">
        ARIA States Test 1b passed: Collapsed accordion header
        <span aria-hidden="true">▶</span>
      </div>
      <div class="accordion-content" id="panel2" role="region" aria-labelledby="accordion2" hidden>
        This content is hidden because aria-expanded is false.
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 2: aria-selected (Tabs)                                          -->
  <!-- ===================================================================== -->

  <section id="test-2" class="test-case">
    <h2>Test 2: aria-selected (Tab Pattern)</h2>

    <div class="expected">
      ARIA States Test 2 passed: Should show "selected=true" for active tab
    </div>

    <div class="demo">
      <div class="tab-list" role="tablist" aria-label="ARIA States Test 2 passed: Tab navigation">
        <button class="tab" role="tab" aria-selected="true" aria-controls="tabpanel1" id="tab1">
          Tab 1 (Selected)
        </button>
        <button class="tab" role="tab" aria-selected="false" aria-controls="tabpanel2" id="tab2">
          Tab 2
        </button>
        <button class="tab" role="tab" aria-selected="false" aria-controls="tabpanel3" id="tab3">
          Tab 3
        </button>
      </div>
      <div id="tabpanel1" role="tabpanel" aria-labelledby="tab1">
        Content for Tab 1
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 3: aria-pressed (Toggle Buttons)                                 -->
  <!-- ===================================================================== -->

  <section id="test-3" class="test-case">
    <h2>Test 3: aria-pressed (Toggle Button)</h2>

    <div class="expected">
      ARIA States Test 3 passed: Should show "pressed=true/false/mixed"
    </div>

    <div class="demo">
      <button class="toggle-btn" aria-pressed="true">
        ARIA States Test 3a passed: Pressed (true)
      </button>
      <button class="toggle-btn" aria-pressed="false">
        ARIA States Test 3b passed: Not pressed (false)
      </button>
      <button class="toggle-btn" aria-pressed="mixed">
        ARIA States Test 3c passed: Mixed state
      </button>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 4: aria-haspopup (Dropdown Menus)                                -->
  <!-- ===================================================================== -->

  <section id="test-4" class="test-case">
    <h2>Test 4: aria-haspopup (Popup Indicators)</h2>

    <div class="expected">
      ARIA States Test 4 passed: Should show "haspopup=menu/listbox/dialog"
    </div>

    <div class="demo">
      <button aria-haspopup="menu" aria-expanded="false">
        ARIA States Test 4a passed: Has menu popup
      </button>
      <button aria-haspopup="listbox" aria-expanded="false">
        ARIA States Test 4b passed: Has listbox popup
      </button>
      <button aria-haspopup="dialog" aria-expanded="false">
        ARIA States Test 4c passed: Has dialog popup
      </button>
      <button aria-haspopup="true">
        ARIA States Test 4d passed: Has popup (legacy true)
      </button>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 5: aria-required (Form Fields)                                   -->
  <!-- ===================================================================== -->

  <section id="test-5" class="test-case">
    <h2>Test 5: aria-required (Required Fields)</h2>

    <div class="expected">
      ARIA States Test 5 passed: Should show "required" for mandatory fields
    </div>

    <div class="demo">
      <form>
        <div>
          <label for="required-aria" class="required-field">ARIA States Test 5a passed: ARIA required</label>
          <input type="text" id="required-aria" aria-required="true">
        </div>
        <div>
          <label for="required-native" class="required-field">ARIA States Test 5b passed: Native required</label>
          <input type="text" id="required-native" required>
        </div>
        <div>
          <label for="optional-field">ARIA States Test 5c passed: Optional field</label>
          <input type="text" id="optional-field">
        </div>
      </form>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 6: aria-invalid (Validation States)                              -->
  <!-- ===================================================================== -->

  <section id="test-6" class="test-case">
    <h2>Test 6: aria-invalid (Validation States)</h2>

    <div class="expected">
      ARIA States Test 6 passed: Should show "invalid=true/grammar/spelling"
    </div>

    <div class="demo">
      <form>
        <div>
          <label for="invalid-true">ARIA States Test 6a passed: Invalid field</label>
          <input type="text" id="invalid-true" aria-invalid="true" class="invalid-input" value="bad input">
          <span id="error-msg" role="alert">This field has an error</span>
        </div>
        <div>
          <label for="invalid-grammar">ARIA States Test 6b passed: Grammar error</label>
          <input type="text" id="invalid-grammar" aria-invalid="grammar" value="grammer mistake">
        </div>
        <div>
          <label for="invalid-spelling">ARIA States Test 6c passed: Spelling error</label>
          <input type="text" id="invalid-spelling" aria-invalid="spelling" value="speling eror">
        </div>
        <div>
          <label for="valid-field">ARIA States Test 6d passed: Valid field</label>
          <input type="text" id="valid-field" aria-invalid="false" value="correct input">
        </div>
      </form>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 7: aria-modal (Dialog Modal)                                     -->
  <!-- ===================================================================== -->

  <section id="test-7" class="test-case">
    <h2>Test 7: aria-modal (Modal Dialogs)</h2>

    <div class="expected">
      ARIA States Test 7 passed: Should show "modal=true" for modal dialogs
    </div>

    <div class="demo">
      <!-- Inline modal for testing (normally would be hidden) -->
      <div role="dialog"
           aria-modal="true"
           aria-labelledby="modal-title"
           aria-describedby="modal-desc"
           style="border: 2px solid #9c27b0; padding: 20px; border-radius: 8px;">
        <h3 id="modal-title">ARIA States Test 7a passed: Modal dialog title</h3>
        <p id="modal-desc">ARIA States Test 7b passed: This is a modal dialog description.</p>
        <button>Close Modal</button>
      </div>

      <!-- Non-modal dialog -->
      <div role="dialog"
           aria-modal="false"
           aria-labelledby="nonmodal-title"
           style="border: 2px dashed #666; padding: 20px; border-radius: 8px; margin-top: 15px;">
        <h3 id="nonmodal-title">ARIA States Test 7c passed: Non-modal dialog</h3>
        <p>This dialog does not trap focus.</p>
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 8: aria-busy (Loading States)                                    -->
  <!-- ===================================================================== -->

  <section id="test-8" class="test-case">
    <h2>Test 8: aria-busy (Loading States)</h2>

    <div class="expected">
      ARIA States Test 8 passed: Should show "busy=true" for loading regions
    </div>

    <div class="demo">
      <div aria-busy="true" aria-live="polite" style="padding: 15px; background: #fff3e0; border-radius: 4px;">
        <span class="loading-spinner"></span>
        ARIA States Test 8a passed: Loading content...
      </div>

      <div aria-busy="false" style="padding: 15px; background: #e8f5e9; border-radius: 4px; margin-top: 15px;">
        ARIA States Test 8b passed: Content loaded successfully
      </div>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 9: aria-current (Current Item)                                   -->
  <!-- ===================================================================== -->

  <section id="test-9" class="test-case">
    <h2>Test 9: aria-current (Current Item Indicators)</h2>

    <div class="expected">
      ARIA States Test 9 passed: Should show "current=page/step/date/time/location"
    </div>

    <div class="demo">
      <nav aria-label="Breadcrumb">
        <ol style="display: flex; list-style: none; padding: 0;">
          <li><a href="#">Home</a> &gt;</li>
          <li><a href="#">Products</a> &gt;</li>
          <li><a href="#" aria-current="page">ARIA States Test 9a passed: Current page</a></li>
        </ol>
      </nav>

      <nav aria-label="Wizard steps">
        <ol style="display: flex; list-style: none; padding: 0; gap: 20px;">
          <li>Step 1: Complete</li>
          <li aria-current="step" style="font-weight: bold;">ARIA States Test 9b passed: Current step</li>
          <li>Step 3: Pending</li>
        </ol>
      </nav>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 10: aria-disabled (Disabled States)                              -->
  <!-- ===================================================================== -->

  <section id="test-10" class="test-case">
    <h2>Test 10: aria-disabled vs native disabled</h2>

    <div class="expected">
      ARIA States Test 10 passed: Should show "disabled" for both ARIA and native disabled
    </div>

    <div class="demo">
      <button aria-disabled="true" style="opacity: 0.5;">
        ARIA States Test 10a passed: ARIA disabled button
      </button>
      <button disabled style="opacity: 0.5;">
        ARIA States Test 10b passed: Native disabled button
      </button>
      <input type="text" aria-disabled="true" value="ARIA States Test 10c passed: ARIA disabled input" style="opacity: 0.5;">
      <input type="text" disabled value="ARIA States Test 10d passed: Native disabled input" style="opacity: 0.5;">
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- TEST 11: aria-hidden (Hidden from AT)                                 -->
  <!-- ===================================================================== -->

  <section id="test-11" class="test-case">
    <h2>Test 11: aria-hidden (Hidden from Assistive Technology)</h2>

    <div class="expected">
      ARIA States Test 11 passed: aria-hidden content should be excluded from ARIA snapshot
    </div>

    <div class="demo">
      <p>ARIA States Test 11a passed: This visible content should appear</p>
      <p aria-hidden="true">SHOULD_NOT_APPEAR_IN_ARIA_SNAPSHOT: This is hidden from AT</p>
      <div aria-hidden="true">
        <p>SHOULD_NOT_APPEAR_IN_ARIA_SNAPSHOT: Nested hidden content</p>
        <button>SHOULD_NOT_APPEAR_IN_ARIA_SNAPSHOT: Hidden button</button>
      </div>
      <p>ARIA States Test 11b passed: More visible content</p>
    </div>
  </section>

  <!-- ===================================================================== -->
  <!-- VALIDATION SECTION                                                    -->
  <!-- ===================================================================== -->

  <footer style="margin-top: 40px; padding: 20px; background: #f0f0f0; border-radius: 8px;">
    <h2>Validation Checklist</h2>

    <h3 style="color: #2e7d32;">Should APPEAR with state values:</h3>
    <ul>
      <li>"ARIA States Test 1a/1b" - with expanded=true/false</li>
      <li>"ARIA States Test 2" - tabs with selected=true/false</li>
      <li>"ARIA States Test 3a/3b/3c" - with pressed=true/false/mixed</li>
      <li>"ARIA States Test 4a-d" - with haspopup values</li>
      <li>"ARIA States Test 5a/5b" - with required attribute</li>
      <li>"ARIA States Test 6a-d" - with invalid values</li>
      <li>"ARIA States Test 7a-c" - with modal=true/false</li>
      <li>"ARIA States Test 8a/8b" - with busy=true/false</li>
      <li>"ARIA States Test 9a/9b" - with current=page/step</li>
      <li>"ARIA States Test 10a-d" - with disabled attribute</li>
      <li>"ARIA States Test 11a/11b" - visible content only</li>
    </ul>

    <h3 style="color: #c62828;">Should NOT appear in ARIA snapshot:</h3>
    <ul>
      <li>"SHOULD_NOT_APPEAR_IN_ARIA_SNAPSHOT" - content with aria-hidden="true"</li>
    </ul>

    <p><strong>Success Criteria:</strong> All state markers present with correct values, aria-hidden content excluded.</p>
  </footer>

</body>
</html>