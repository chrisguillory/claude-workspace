<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 530">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#999"/>
    </marker>
    <marker id="arrow-purple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#7b1fa2"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="720" height="530" fill="#fff"/>

  <!-- Title -->
  <text x="360" y="28" text-anchor="middle" font-family="system-ui, sans-serif" font-size="17" font-weight="600" fill="#333">Claude Code Tool Architecture</text>

  <!-- Human -->
  <rect x="285" y="45" width="150" height="44" rx="8" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
  <text x="360" y="73" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#1565c0">Human</text>

  <!-- Arrow: Human to Claude -->
  <line x1="360" y1="89" x2="360" y2="115" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Claude Code (wider) -->
  <rect x="210" y="120" width="300" height="60" rx="8" fill="#fff3e0" stroke="#f57c00" stroke-width="2"/>
  <text x="360" y="148" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#e65100">Claude Code</text>
  <text x="360" y="168" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#666">LLM Orchestrator — decides which tools to use</text>

  <!-- Arrows: Claude to tools -->
  <line x1="280" y1="180" x2="135" y2="215" stroke="#7b1fa2" stroke-width="2" marker-end="url(#arrow-purple)"/>
  <line x1="360" y1="180" x2="360" y2="215" stroke="#999" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="440" y1="180" x2="585" y2="215" stroke="#999" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- DOCUMENT SEARCH (LEFT, PROMINENT) -->
  <rect x="20" y="220" width="230" height="115" rx="8" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="3"/>
  <text x="135" y="246" text-anchor="middle" font-family="system-ui, sans-serif" font-size="15" font-weight="700" fill="#6a1b9a">Document Search</text>
  <text x="135" y="264" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#8e24aa">Docs &amp; Session Memory</text>
  <line x1="40" y1="274" x2="230" y2="274" stroke="#ce93d8" stroke-width="1"/>
  <text x="50" y="292" font-family="system-ui, sans-serif" font-size="10" fill="#555">• Session transcripts (.jsonl)</text>
  <text x="50" y="308" font-family="system-ui, sans-serif" font-size="10" fill="#555">• Markdown, PDFs, text</text>
  <text x="50" y="324" font-family="system-ui, sans-serif" font-size="10" fill="#555">• Modes: hybrid | lexical-only</text>

  <!-- Built-in (CENTER, more transparent) -->
  <rect x="265" y="220" width="190" height="115" rx="8" fill="#f5f5f5" stroke="#bdbdbd" stroke-width="1.5" opacity="0.8"/>
  <text x="360" y="246" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#757575">Built-in</text>
  <text x="360" y="264" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#999">File Access</text>
  <line x1="285" y1="274" x2="435" y2="274" stroke="#e0e0e0" stroke-width="1"/>
  <text x="285" y="292" font-family="system-ui, sans-serif" font-size="10" fill="#888">• Read files</text>
  <text x="285" y="308" font-family="system-ui, sans-serif" font-size="10" fill="#888">• Grep patterns</text>
  <text x="285" y="324" font-family="system-ui, sans-serif" font-size="10" fill="#888">• Glob paths</text>

  <!-- LSP (RIGHT, more transparent) -->
  <rect x="470" y="220" width="230" height="115" rx="8" fill="#f5f5f5" stroke="#bdbdbd" stroke-width="1.5" opacity="0.8"/>
  <text x="585" y="246" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#757575">LSP</text>
  <text x="585" y="264" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#999">Code Intelligence</text>
  <line x1="490" y1="274" x2="680" y2="274" stroke="#e0e0e0" stroke-width="1"/>
  <text x="500" y="292" font-family="system-ui, sans-serif" font-size="10" fill="#888">• Go to definition</text>
  <text x="500" y="308" font-family="system-ui, sans-serif" font-size="10" fill="#888">• Find references</text>
  <text x="500" y="324" font-family="system-ui, sans-serif" font-size="10" fill="#888">• Symbol search</text>

  <!-- Arrows from Document Search to backends -->
  <!-- Hybrid path: Doc Search → Gemini (embed) -->
  <line x1="65" y1="335" x2="65" y2="365" stroke="#7b1fa2" stroke-width="2" marker-end="url(#arrow-purple)"/>
  <text x="75" y="355" font-family="system-ui, sans-serif" font-size="9" fill="#7b1fa2">embed</text>

  <!-- Lexical path: Doc Search → Qdrant directly (no embedding) -->
  <line x1="218" y1="335" x2="218" y2="368" stroke="#7b1fa2" stroke-width="2" marker-end="url(#arrow-purple)"/>
  <text x="228" y="348" font-family="system-ui, sans-serif" font-size="9" fill="#7b1fa2">BM25</text>
  <text x="228" y="359" font-family="system-ui, sans-serif" font-size="8" fill="#999">(no embedding)</text>

  <!-- Grayed arrows for Built-in and LSP -->
  <line x1="360" y1="335" x2="360" y2="365" stroke="#bbb" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="585" y1="335" x2="585" y2="365" stroke="#bbb" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Gemini API -->
  <rect x="20" y="370" width="110" height="50" rx="6" fill="#e8eaf6" stroke="#5c6bc0" stroke-width="1.5"/>
  <text x="75" y="390" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#3949ab">Gemini API</text>
  <text x="75" y="404" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#666">text-embedding-004</text>

  <!-- Arrow: Gemini → Qdrant (vectors) -->
  <line x1="130" y1="395" x2="163" y2="395" stroke="#7b1fa2" stroke-width="2" marker-end="url(#arrow-purple)"/>
  <text x="147" y="382" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#7b1fa2">vectors</text>

  <!-- Qdrant -->
  <rect x="168" y="370" width="100" height="50" rx="6" fill="#f3e5f5" stroke="#ab47bc" stroke-width="1.5"/>
  <text x="218" y="390" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#7b1fa2">Qdrant</text>
  <text x="218" y="404" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">vectors + BM25</text>

  <!-- Any Files (grayed) -->
  <rect x="285" y="370" width="150" height="50" rx="6" fill="#f5f5f5" stroke="#ccc" stroke-width="1" opacity="0.8"/>
  <text x="360" y="393" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#999">Any Files</text>
  <text x="360" y="408" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#bbb">text patterns</text>

  <!-- Code Files (grayed) -->
  <rect x="510" y="370" width="150" height="50" rx="6" fill="#f5f5f5" stroke="#ccc" stroke-width="1" opacity="0.8"/>
  <text x="585" y="393" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#999">Code Files</text>
  <text x="585" y="408" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#bbb">.py .js .ts .go</text>

  <!-- Indexed documents callout -->
  <rect x="20" y="435" width="240" height="38" rx="6" fill="#fce4ec" stroke="#f48fb1" stroke-width="1"/>
  <text x="140" y="455" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#c2185b">Indexed: .md .pdf .json .jsonl .txt .csv .eml</text>
  <text x="140" y="468" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#888">(session transcripts = memory across sessions)</text>

  <!-- Legend (simplified, left side) -->
  <rect x="20" y="480" width="240" height="42" rx="6" fill="#fffde7" stroke="#fbc02d" stroke-width="1"/>
  <text x="140" y="497" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="#f57f17">Search Precision</text>
  <text x="140" y="514" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#666">Doc Search: semantic + lexical | Built-in: pattern | LSP: exact</text>

</svg>